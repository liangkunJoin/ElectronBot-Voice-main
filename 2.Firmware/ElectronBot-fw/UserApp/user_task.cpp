#include "common_inc.h"
#include "robot.h"
#include "i2s.h"
#include <math.h>

extern Robot robot(&hspi1, &hi2s3, &hi2c1, &hi2c3);



 
#define PI (3.1415926535898f)
#define	PCM_SAMP_NUM (996)
int16_t pcmsample_16bit[PCM_SAMP_NUM]{0xfe,0xff,0xfe,0xff,
                                      0xfc,0xff,0xfc,0xff,0xfc,0xff,0xfc,0xff,0xfb,0xff,0xfb,0xff,0xf9,0xff,0xf9,0xff,
                                      0xf7,0xff,0xf7,0xff,0xf7,0xff,0xf7,0xff,0xf7,0xff,0xfc,0xff,0x0,0x0,0xf9,0xff,
                                      0xf6,0xff,0xf6,0xff,0xf7,0xff,0xf7,0xff,0xf7,0xff,0xf6,0xff,0xf4,0xff,0xf4,0xff,
                                      0xf4,0xff,0xf4,0xff,0xf4,0xff,0xf6,0xff,0xf4,0xff,0xf4,0xff,0xf6,0xff,0xf4,0xff,
                                      0xf4,0xff,0xf6,0xff,0xf6,0xff,0xf7,0xff,0xf6,0xff,0xf6,0xff,0xf7,0xff,0xf4,0xff,
                                      0xf6,0xff,0xf7,0xff,0xf7,0xff,0xf7,0xff,0xf7,0xff,0xf9,0xff,0xfb,0xff,0xf9,0xff,
                                      0xf9,0xff,0xf9,0xff,0xfb,0xff,0xfc,0xff,0xfb,0xff,0xfb,0xff,0xfc,0xff,0xfb,0xff,
                                      0xfb,0xff,0xfc,0xff,0xfb,0xff,0xfb,0xff,0xfc,0xff,0xfc,0xff,0xfb,0xff,0xfc,0xff,
                                      0xfe,0xff,0xfe,0xff,0xfe,0xff,0xfc,0xff,0xfe,0xff,0xfc,0xff,0xf9,0xff,0xfc,0xff,
                                      0xfc,0xff,0xfb,0xff,0xf7,0xff,0xf9,0xff,0xf7,0xff,0xf7,0xff,0xf7,0xff,0xf7,0xff,
                                      0xf6,0xff,0xf4,0xff,0xf4,0xff,0xf9,0xff,0xfe,0xff,0xf7,0xff,0xf4,0xff,0xf2,0xff,
                                      0xf2,0xff,0xf4,0xff,0xf4,0xff,0xf2,0xff,0xf1,0xff,0xf1,0xff,0xf2,0xff,0xf1,0xff,
                                      0xf1,0xff,0xf2,0xff,0xf2,0xff,0xf2,0xff,0xf2,0xff,0xf2,0xff,0xf4,0xff,0xf1,0xff,
                                      0xf1,0xff,0xf4,0xff,0xf4,0xff,0xf1,0xff,0xf2,0xff,0xf6,0xff,0xf2,0xff,0xf1,0xff,
                                      0xf4,0xff,0xf2,0xff,0xf1,0xff,0xf2,0xff,0xf4,0xff,0xf4,0xff,0xf4,0xff,0xf4,0xff,
                                      0xf6,0xff,0xf4,0xff,0xf6,0xff,0xf6,0xff,0xf4,0xff,0xf7,0xff,0xf7,0xff,0xf4,0xff,
                                      0xf7,0xff,0xf7,0xff,0xf6,0xff,0xf7,0xff,0xf7,0xff,0xf7,0xff,0xf7,0xff,0xf6,0xff,
                                      0xf7,0xff,0xf6,0xff,0xf4,0xff,0xf4,0xff,0xf6,0xff,0xf6,0xff,0xf2,0xff,0xf4,0xff,
                                      0xf6,0xff,0xf1,0xff,0xf4,0xff,0xf4,0xff,0xf4,0xff,0xf1,0xff,0xef,0xff,0xf2,0xff,
                                      0xf7,0xff,0xfc,0xff,0xf4,0xff,0xf2,0xff,0xf2,0xff,0xf4,0xff,0xf4,0xff,0xf2,0xff,
                                      0xf2,0xff,0xf1,0xff,0xf1,0xff,0xed,0xff,0xef,0xff,0xf1,0xff,0xf2,0xff,0xef,0xff,
                                      0xed,0xff,0xf1,0xff,0xef,0xff,0xec,0xff,0xef,0xff,0xef,0xff,0xef,0xff,0xef,0xff,
                                      0xf1,0xff,0xf1,0xff,0xed,0xff,0xf1,0xff,0xf2,0xff,0xf4,0xff,0xf2,0xff,0xf2,0xff,
                                      0xf4,0xff,0xf4,0xff,0xf4,0xff,0xf4,0xff,0xf4,0xff,0xf7,0xff,0xf9,0xff,0xf6,0xff,
                                      0xf7,0xff,0xf7,0xff,0xf7,0xff,0xf7,0xff,0xf9,0xff,0xf7,0xff,0xf7,0xff,0xf9,0xff,
                                      0xfb,0xff,0xf7,0xff,0xf9,0xff,0xfb,0xff,0xf9,0xff,0xf9,0xff,0xf7,0xff,0xf7,0xff,
                                      0xf6,0xff,0xf4,0xff,0xf6,0xff,0xf4,0xff,0xf2,0xff,0xf4,0xff,0xf4,0xff,0xf1,0xff,
                                      0xf1,0xff,0xf2,0xff,0xf2,0xff,0xf1,0xff,0xf9,0xff,0xfb,0xff,0xf1,0xff,0xed,0xff,
                                      0xf1,0xff,0xf2,0xff,0xf1,0xff,0xed,0xff,0xed,0xff,0xed,0xff,0xec,0xff,0xec,0xff,
                                      0xec,0xff,0xed,0xff,0xea,0xff,0xed,0xff,0xed,0xff,0xe9,0xff,0xed,0xff,0xed,0xff,
                                      0xec,0xff,0xec,0xff,0xec,0xff,0xea,0xff,0xec,0xff,0xef,0xff,0xed,0xff,0xed,0xff,
                                      0xf1,0xff,0xef,0xff,0xed,0xff,0xf2,0xff,0xf2,0xff,0xf2,0xff,0xf4,0xff,0xf4,0xff,
                                      0xf2,0xff,0xf4,0xff,0xf6,0xff,0xf6,0xff,0xf4,0xff,0xf7,0xff,0xf7,0xff,0xf6,0xff,
                                      0xf9,0xff,0xf9,0xff,0xf9,0xff,0xf9,0xff,0xfb,0xff,0xfb,0xff,0xfb,0xff,0xfb,0xff,
                                      0xfb,0xff,0xf7,0xff,0xf4,0xff,0xf7,0xff,0xf6,0xff,0xf2,0xff,0xf4,0xff,0xf4,0xff,
                                      0xf1,0xff,0xef,0xff,0xf1,0xff,0xf1,0xff,0xf1,0xff,0xf1,0xff,0xf2,0xff,0xfc,0xff,
                                      0xf7,0xff,0xf1,0xff,0xf1,0xff,0xf1,0xff,0xf1,0xff,0xef,0xff,0xf1,0xff,0xef,0xff,
                                      0xed,0xff,0xef,0xff,0xec,0xff,0xec,0xff,0xec,0xff,0xec,0xff,0xea,0xff,0xec,0xff,
                                      0xed,0xff,0xec,0xff,0xea,0xff,0xec,0xff,0xec,0xff,0xec,0xff,0xec,0xff,0xec,0xff,
                                      0xec,0xff,0xec,0xff,0xef,0xff,0xed,0xff,0xec,0xff,0xef,0xff,0xf2,0xff,0xf1,0xff,
                                      0xf1,0xff,0xf2,0xff,0xf6,0xff,0xf4,0xff,0xf4,0xff,0xf6,0xff,0xf7,0xff,0xf6,0xff,
                                      0xf6,0xff,0xf9,0xff,0xf9,0xff,0xf7,0xff,0xf7,0xff,0xfb,0xff,0xf9,0xff,0xf7,0xff,
                                      0xf9,0xff,0xfb,0xff,0xf9,0xff,0xf7,0xff,0xf9,0xff,0xfb,0xff,0xf6,0xff,0xf6,0xff,
                                      0xf7,0xff,0xf4,0xff,0xf4,0xff,0xf4,0xff,0xf2,0xff,0xf1,0xff,0xef,0xff,0xef,0xff,
                                      0xf1,0xff,0xfb,0xff,0xf9,0xff,0xf1,0xff,0xed,0xff,0xf1,0xff,0xf2,0xff,0xef,0xff,
                                      0xef,0xff,0xf1,0xff,0xef,0xff,0xed,0xff,0xea,0xff,0xec,0xff,0xec,0xff,0xea,0xff,
                                      0xe9,0xff,0xea,0xff,0xea,0xff,0xe9,0xff,0xe9,0xff,0xe7,0xff,0xea,0xff,0xe9,0xff,
                                      0xe9,0xff,0xea,0xff,0xe9,0xff,0xea,0xff,0xec,0xff,0xec,0xff,0xec,0xff,0xec,0xff,
                                      0xed,0xff,0xef,0xff,0xed,0xff,0xed,0xff,0xef,0xff,0xf1,0xff,0xef,0xff,0xf1,0xff,
                                      0xf2,0xff,0xf4,0xff,0xf6,0xff,0xf4,0xff,0xf4,0xff,0xf7,0xff,0xf6,0xff,0xf6,0xff,
                                      0xf7,0xff,0xf7,0xff,0xf7,0xff,0xf7,0xff,0xf6,0xff,0xf4,0xff,0xf4,0xff,0xf6,0xff,
                                      0xf4,0xff,0xf4,0xff,0xf2,0xff,0xf2,0xff,0xf1,0xff,0xef,0xff,0xf1,0xff,0xef,0xff,
                                      0xed,0xff,0xef,0xff,0xf1,0xff,0xf7,0xff,0xf4,0xff,0xef,0xff,0xf1,0xff,0xf1,0xff,
                                      0xef,0xff,0xef,0xff,0xf1,0xff,0xef,0xff,0xed,0xff,0xed,0xff,0xed,0xff,0xea,0xff,
                                      0xea,0xff,0xea,0xff,0xe9,0xff,0xe9,0xff,0xea,0xff,0xe7,0xff,0xe5,0xff,0xe7,0xff,
                                      0xe7,0xff,0xe5,0xff,0xe4,0xff,0xe7,0xff,0xe5,0xff,0xe4,0xff,0xe7,0xff,0xe7,0xff,
                                      0xe7,0xff,0xe9,0xff,0xea,0xff,0xea,0xff,0xec,0xff,0xed,0xff,0xef,0xff,0xed,0xff,
                                      0xf1,0xff,0xf1,0xff,0xf1,0xff,0xf2,0xff,0xf4,0xff,0xf4,0xff,0xf2,0xff,0xf4,0xff,
                                      0xf7,0xff,0xf9,0xff,0xf6,0xff,0xf7,0xff,0xf7,0xff,0xf6,0xff,0xf6,0xff,0xf7,0xff,
                                      0xf6,0xff,0xf7,0xff,0xf6,0xff,0xf2,0xff,0xf6,0xff,0xf6,0xff,0xf2,0xff,0xf4,0xff,
                                      0xf2,0xff,0xef,0xff,0xf1,0xff,0xf1,0xff,0xf9,0xff,0xfc,0xff,0xf4,0xff,0xf2,0xff,
                                      0xf1,0xff,0xf4,0xff,0xf2,0xff,0xef,0xff,0xef,0xff,0xed,0xff,0xec,0xff,0xed,0xff};

void TaskAudioEntry(void) {
    osDelay(100);
    printf("初始化 audio start \r\n");
    robot.audio->Init();
    printf("初始化 audio end \r\n");
    osDelay(100);
    printf("数据传输 audio start \r\n");
    robot.audio->WriteData(pcmsample_16bit, PCM_SAMP_NUM, true);
    while(1) {

    }

}
 
